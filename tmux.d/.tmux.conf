setw -g mode-keys emacs
setw -g monitor-activity on
set-window-option -g xterm-keys on
set-window-option -g automatic-rename on

set -g terminal-overrides 'xterm*:smcup@:rmcup@'
set -g history-limit 10000

set-option -g set-titles on
set-option -g mouse on
# Set the prefix to ^x
set-option -g prefix C-z

# window
bind-key 1 break-pane
bind-key 2 split-window -v
bind-key 3 split-window -h
bind-key k kill-pane
bind-key c confirm-before -p "kill-window #W? (y/n)" kill-window
bind-key b choose-window
bind-key B command-prompt -p "create pane from:"  "join-pane -s ':%%'"
bind-key ^q new-window
bind-key ^f command-prompt "find-window '%%'"
bind-key ^t choose-window
bind-key ^[ copy-mode

# other
bind-key ^r source-file ~/.tmux.conf
## Press C-z twice will send prefix to another app running inside tmux session
bind-key C-z send-prefix
bind-key ^D detach

# copy-mode
bind-key -T copy-mode C-w   send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode M-w   send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode Enter send-keys -X copy-pipe "pbcopy"

# global
bind-key -n C-o select-pane -t :.+
bind-key -n C-u select-pane -t :.-
bind-key -n C-y run "pbpaste | tmux load-buffer - && tmux paste-buffer"
bind-key -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"
